<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Studio UI Creator</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <style>
        :root {
            --bg-main: #202020;
            --bg-panel: #252525;
            --bg-element: #393939;
            --bg-input: #1b1b1b;
            --border-color: #404040;
            --text-primary: #e0e0e0;
            --text-secondary: #a0a0a0;
            --accent-blue: #0078d4;
            --accent-yellow: #ffb900;
            --shadow: 0 4px 12px rgba(0,0,0,0.4);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        html, body {
            font-family: 'Segoe UI', Roboto, sans-serif;
            background-color: var(--bg-main);
            color: var(--text-primary);
            width: 100vw;
            height: 100vh;
            overflow: hidden;
            user-select: none;
        }

        .app-container { display: flex; width: 100%; height: 100%; }

        .viewport { flex-grow: 1; position: relative; display: flex; justify-content: center; align-items: center; padding: 20px; }

        .toolbar {
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 8px;
            background-color: var(--bg-panel);
            padding: 8px;
            border-radius: 8px;
            box-shadow: var(--shadow);
            z-index: 20;
            border: 1px solid var(--border-color);
        }

        .tool-button {
            background-color: var(--bg-element);
            border: none;
            color: var(--text-primary);
            width: 40px;
            height: 40px;
            border-radius: 6px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.2s;
        }

        .tool-button:hover { background-color: #4a4a4a; }
        .tool-button.active { background-color: var(--accent-blue); }

        .preview-area {
            width: 100%;
            height: 100%;
            background-color: var(--bg-main);
            border: 1px dashed var(--border-color);
            border-radius: 8px;
            position: relative;
            overflow: hidden;
        }

        .properties-panel {
            width: 320px;
            height: 100%;
            background-color: var(--bg-panel);
            border-left: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease-out;
            z-index: 30;
        }

        .panel-handle {
            display: none;
            position: absolute;
            left: -40px;
            top: 10px;
            width: 40px;
            height: 40px;
            background-color: var(--bg-panel);
            border: 1px solid var(--border-color);
            border-right: none;
            border-radius: 8px 0 0 8px;
            cursor: pointer;
            align-items: center;
            justify-content: center;
        }

        .panel-content { flex-grow: 1; overflow-y: auto; }
        .panel-header { padding: 16px; border-bottom: 1px solid var(--border-color); }
        .panel-header h2 { font-size: 16px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .panel-section { padding: 16px; }

        details { margin-bottom: 12px; }
        summary { font-weight: 600; cursor: pointer; padding: 8px; background-color: var(--bg-elementById(state.selectedId)));
                    } else if (selectedElement) {
                        state.selectedId = parseInt(selectedElement.dataset.id);
                        state.action = 'move';
                        state.originalElement = JSON.parse(JSON.stringify(findElementById(state.selectedId)));
                        render();
                    } else {
                        state.selectedId = null;
                        render();
                    }
                });

                document.addEventListener('mousemove', (e) => {
                    if (!state.action) return;
                    const dx = e.clientX - state.dragStart.x;
                    const dy = e.clientY - state.dragStart.y;
                    const el = findElementById(state.selectedId);
                    const orig = state.originalElement.properties;

                    switch (state.action) {
                        case 'move':
                            el.properties.Position.X = orig.Position.X + dx;
                            el.properties.Position.Y = orig.Position.Y + dy;
                            break;
                        case 'radius':
                            const newRadius = Math.max(0, orig.CornerRadius + (dx + dy) / 2);
